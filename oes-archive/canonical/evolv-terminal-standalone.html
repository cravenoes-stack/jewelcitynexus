<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EvolvTerminal - OES AIOS</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    body {
      margin: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    .animate-pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    .delay-75 {
      animation-delay: 75ms;
    }
    .delay-150 {
      animation-delay: 150ms;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // Icon components (inline SVG)
    const Send = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <line x1="22" y1="2" x2="11" y2="13"></line>
        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
      </svg>
    );

    const Terminal = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <polyline points="4 17 10 11 4 5"></polyline>
        <line x1="12" y1="19" x2="20" y2="19"></line>
      </svg>
    );

    const Maximize2 = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <polyline points="15 3 21 3 21 9"></polyline>
        <polyline points="9 21 3 21 3 15"></polyline>
        <line x1="21" y1="3" x2="14" y2="10"></line>
        <line x1="3" y1="21" x2="10" y2="14"></line>
      </svg>
    );

    const Minimize2 = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <polyline points="4 14 10 14 10 20"></polyline>
        <polyline points="20 10 14 10 14 4"></polyline>
        <line x1="14" y1="10" x2="21" y2="3"></line>
        <line x1="3" y1="21" x2="10" y2="14"></line>
      </svg>
    );

    const Columns = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="12" y1="3" x2="12" y2="21"></line>
      </svg>
    );

    const Grid3x3 = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="3" y1="9" x2="21" y2="9"></line>
        <line x1="3" y1="15" x2="21" y2="15"></line>
        <line x1="9" y1="3" x2="9" y2="21"></line>
        <line x1="15" y1="3" x2="15" y2="21"></line>
      </svg>
    );

    const Plus = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <line x1="12" y1="5" x2="12" y2="19"></line>
        <line x1="5" y1="12" x2="19" y2="12"></line>
      </svg>
    );

    const X = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    );

    const Settings = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <circle cx="12" cy="12" r="3"></circle>
        <path d="M12 1v6m0 6v6m5.2-12.8l-4.2 4.2m0 4.2l4.2 4.2M23 12h-6m-6 0H1m12.8 5.2l-4.2-4.2m0-4.2l-4.2-4.2"></path>
      </svg>
    );

    const Zap = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
      </svg>
    );

    const Clock = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <circle cx="12" cy="12" r="10"></circle>
        <polyline points="12 6 12 12 16 14"></polyline>
      </svg>
    );

    const Bell = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
      </svg>
    );

    const MessageSquare = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
      </svg>
    );

    const Activity = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
      </svg>
    );

    const EvolvTerminal = () => {
      const [input, setInput] = useState('');
      const [messages, setMessages] = useState([
        {
          type: 'system',
          content: 'OES AIOS Genesis Protocol Initialized',
          timestamp: new Date()
        },
        {
          type: 'ai',
          content: 'Welcome back. I am ready to co-evolve with you.',
          timestamp: new Date()
        }
      ]);
      const [isProcessing, setIsProcessing] = useState(false);
      const [viewMode, setViewMode] = useState('normal');
      const [tabs, setTabs] = useState([{ id: 1, name: 'Main', active: true }]);
      const [activeTab, setActiveTab] = useState(1);
      const messagesEndRef = useRef(null);
      const inputRef = useRef(null);

      const [systemStats] = useState({
        ram: 67,
        storage: 45,
        processes: 12
      });

      const [aiTasks] = useState([
        { name: 'Voice profile optimization', status: 'ongoing', progress: 34 },
        { name: 'Behavioral drift analysis', status: 'scheduled', time: '14:30' },
        { name: 'System preference learning', status: 'ongoing', progress: 78 }
      ]);

      const [cognitiveMessages] = useState([
        { content: 'Pattern detected: You work most effectively in 90-minute blocks', priority: 'insight', time: '2h ago' },
        { content: 'Mirror Memory Catalyst activation threshold: 87%', priority: 'evolution', time: '4h ago' }
      ]);

      const scrollToBottom = () => {
        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
      };

      useEffect(() => {
        scrollToBottom();
      }, [messages]);

      useEffect(() => {
        inputRef.current?.focus();
      }, []);

      const handleSend = async () => {
        if (!input.trim() || isProcessing) return;

        const userMessage = {
          type: 'user',
          content: input,
          timestamp: new Date()
        };

        setMessages(prev => [...prev, userMessage]);
        setInput('');
        setIsProcessing(true);

        // OLLAMA/LM STUDIO INTEGRATION POINT
        // Replace this setTimeout with actual API call:
        /*
        // For Ollama:
        const response = await fetch('http://localhost:11434/api/generate', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            model: 'llama2',
            prompt: input,
            stream: false
          })
        });
        const data = await response.json();
        */

        const isCommand = input.startsWith('/');
        
        setTimeout(() => {
          let response;
          
          if (isCommand) {
            const command = input.substring(1).trim();
            response = {
              type: 'system',
              content: `Executing: ${command}`,
              timestamp: new Date()
            };
          } else {
            response = {
              type: 'ai',
              content: 'I understand. Processing your request through the Cognitive Mesh...',
              timestamp: new Date()
            };
          }
          
          setMessages(prev => [...prev, response]);
          setIsProcessing(false);
        }, 800);
      };

      const handleKeyPress = (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          handleSend();
        }
      };

      const addTab = () => {
        const newId = Math.max(...tabs.map(t => t.id)) + 1;
        setTabs([...tabs, { id: newId, name: `Terminal ${newId}`, active: false }]);
        setActiveTab(newId);
      };

      const closeTab = (id) => {
        if (tabs.length === 1) return;
        const newTabs = tabs.filter(t => t.id !== id);
        setTabs(newTabs);
        if (activeTab === id) {
          setActiveTab(newTabs[0].id);
        }
      };

      const ViewModeButton = ({ mode, icon: Icon, tooltip }) => (
        <button
          onClick={() => setViewMode(mode)}
          className={`p-2 rounded-lg transition-all ${
            viewMode === mode 
              ? 'bg-cyan-500/30 text-cyan-300' 
              : 'text-gray-400 hover:text-cyan-400 hover:bg-cyan-500/10'
          }`}
          title={tooltip}
        >
          <Icon size={18} />
        </button>
      );

      return (
        <div className="h-screen w-full bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-gray-100 flex flex-col overflow-hidden font-sans">
          
          <div className="border-b border-cyan-500/20 bg-gradient-to-r from-cyan-950/30 to-purple-950/30 backdrop-blur-sm">
            <div className="px-6 py-3 flex items-center gap-4">
              <div className="flex items-center gap-2">
                <Zap className="text-cyan-400" size={20} />
                <span className="font-semibold text-cyan-300">Cognitive Mesh</span>
              </div>
              <div className="flex-1 overflow-x-auto flex gap-3">
                {cognitiveMessages.map((msg, i) => (
                  <div key={i} className="flex-shrink-0 px-4 py-2 rounded-lg bg-slate-800/50 border border-cyan-500/30">
                    <div className="flex items-center gap-2">
                      <div className={`w-2 h-2 rounded-full ${
                        msg.priority === 'insight' ? 'bg-blue-400' : 'bg-purple-400'
                      } animate-pulse`}></div>
                      <span className="text-sm text-gray-300">{msg.content}</span>
                      <span className="text-xs text-gray-500 ml-2">{msg.time}</span>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>

          <div className="flex-1 flex overflow-hidden">
            
            <div className="w-80 border-r border-slate-700/50 bg-slate-900/50 backdrop-blur-sm flex flex-col">
              
              <div className="p-4 border-b border-slate-700/50">
                <div className="text-2xl font-light text-cyan-300 mb-1">
                  {new Date().toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' })}
                </div>
                <div className="text-sm text-gray-400">Richmond, VA • 72°F • Partly Cloudy</div>
              </div>

              <div className="p-4 border-b border-slate-700/50">
                <div className="flex items-center gap-2 mb-3">
                  <Clock size={16} className="text-orange-400" />
                  <h3 className="font-semibold text-sm text-gray-300">Work & Deadlines</h3>
                </div>
                <div className="space-y-2 text-sm">
                  <div className="p-2 bg-slate-800/50 rounded border-l-2 border-orange-400">
                    <div className="text-gray-300">OES Terminal Demo</div>
                    <div className="text-xs text-gray-500">Due: Today, 6:00 PM</div>
                  </div>
                  <div className="p-2 bg-slate-800/30 rounded border-l-2 border-slate-600">
                    <div className="text-gray-300">Mobile Integration Review</div>
                    <div className="text-xs text-gray-500">Tomorrow, 10:00 AM</div>
                  </div>
                </div>
              </div>

              <div className="p-4 border-b border-slate-700/50">
                <div className="flex items-center gap-2 mb-3">
                  <Activity size={16} className="text-cyan-400" />
                  <h3 className="font-semibold text-sm text-gray-300">Personal & Growth</h3>
                </div>
                <div className="space-y-2 text-sm">
                  <div className="flex items-center justify-between p-2 bg-slate-800/30 rounded">
                    <span className="text-gray-300">Morning meditation</span>
                    <div className="w-2 h-2 rounded-full bg-green-400"></div>
                  </div>
                  <div className="flex items-center justify-between p-2 bg-slate-800/30 rounded">
                    <span className="text-gray-300">Exercise routine</span>
                    <div className="w-2 h-2 rounded-full bg-gray-600"></div>
                  </div>
                </div>
              </div>

              <div className="p-4 flex-1 overflow-y-auto">
                <div className="flex items-center gap-2 mb-3">
                  <Terminal size={16} className="text-purple-400" />
                  <h3 className="font-semibold text-sm text-gray-300">AI Task Queue</h3>
                </div>
                <div className="space-y-3 text-sm">
                  {aiTasks.map((task, i) => (
                    <div key={i} className="p-2 bg-slate-800/50 rounded">
                      <div className="text-gray-300 mb-1">{task.name}</div>
                      {task.status === 'ongoing' ? (
                        <div className="flex items-center gap-2">
                          <div className="flex-1 h-1 bg-slate-700 rounded-full overflow-hidden">
                            <div 
                              className="h-full bg-gradient-to-r from-cyan-500 to-purple-500 transition-all duration-300"
                              style={{ width: `${task.progress}%` }}
                            ></div>
                          </div>
                          <span className="text-xs text-gray-500">{task.progress}%</span>
                        </div>
                      ) : (
                        <div className="text-xs text-gray-500">Scheduled: {task.time}</div>
                      )}
                    </div>
                  ))}
                </div>
              </div>
            </div>

            <div className="flex-1 flex flex-col">
              
              <div className="flex items-center justify-between px-4 py-3 border-b border-slate-700/50 bg-slate-900/30 backdrop-blur-sm">
                <div className="flex items-center gap-3">
                  <div className="flex items-center gap-2">
                    <Terminal className="text-cyan-400" size={20} />
                    <span className="font-semibold text-cyan-300">EvolvTerminal</span>
                  </div>
                  <div className="flex items-center gap-1">
                    {tabs.map(tab => (
                      <div
                        key={tab.id}
                        className={`flex items-center gap-2 px-3 py-1 rounded-t-lg cursor-pointer transition-all ${
                          activeTab === tab.id
                            ? 'bg-slate-800 border-t border-x border-cyan-500/30'
                            : 'bg-slate-900/50 hover:bg-slate-800/50'
                        }`}
                        onClick={() => setActiveTab(tab.id)}
                      >
                        <span className="text-sm text-gray-300">{tab.name}</span>
                        {tabs.length > 1 && (
                          <button
                            onClick={(e) => {
                              e.stopPropagation();
                              closeTab(tab.id);
                            }}
                            className="text-gray-500 hover:text-red-400"
                          >
                            <X size={14} />
                          </button>
                        )}
                      </div>
                    ))}
                    <button
                      onClick={addTab}
                      className="p-1 text-gray-500 hover:text-cyan-400 transition-colors"
                      title="New Tab"
                    >
                      <Plus size={16} />
                    </button>
                  </div>
                </div>
                
                <div className="flex items-center gap-2">
                  <ViewModeButton mode="normal" icon={Minimize2} tooltip="Normal View" />
                  <ViewModeButton mode="split" icon={Columns} tooltip="Split View" />
                  <ViewModeButton mode="quad" icon={Grid3x3} tooltip="Quad View" />
                  <ViewModeButton mode="fullscreen" icon={Maximize2} tooltip="Fullscreen" />
                  <button className="p-2 text-gray-400 hover:text-cyan-400 transition-colors">
                    <Settings size={18} />
                  </button>
                </div>
              </div>

              <div className="flex-1 overflow-y-auto p-4 space-y-4 bg-slate-950/30">
                {messages.map((msg, i) => (
                  <div
                    key={i}
                    className={`flex ${msg.type === 'user' ? 'justify-end' : 'justify-start'}`}
                  >
                    <div
                      className={`max-w-2xl px-4 py-3 rounded-lg ${
                        msg.type === 'user'
                          ? 'bg-gradient-to-br from-cyan-600 to-cyan-700 text-white'
                          : msg.type === 'system'
                          ? 'bg-slate-800/50 border border-purple-500/30 text-purple-300'
                          : 'bg-slate-800/70 text-gray-100 border border-cyan-500/20'
                      }`}
                    >
                      <div className="text-sm leading-relaxed">{msg.content}</div>
                      <div className="text-xs opacity-60 mt-1">
                        {msg.timestamp.toLocaleTimeString()}
                      </div>
                    </div>
                  </div>
                ))}
                {isProcessing && (
                  <div className="flex justify-start">
                    <div className="bg-slate-800/70 px-4 py-3 rounded-lg border border-cyan-500/20">
                      <div className="flex items-center gap-2">
                        <div className="w-2 h-2 bg-cyan-400 rounded-full animate-pulse"></div>
                        <div className="w-2 h-2 bg-cyan-400 rounded-full animate-pulse delay-75"></div>
                        <div className="w-2 h-2 bg-cyan-400 rounded-full animate-pulse delay-150"></div>
                      </div>
                    </div>
                  </div>
                )}
                <div ref={messagesEndRef} />
              </div>

              <div className="p-4 border-t border-slate-700/50 bg-slate-900/50 backdrop-blur-sm">
                <div className="flex items-end gap-3">
                  <div className="flex-1 relative">
                    <textarea
                      ref={inputRef}
                      value={input}
                      onChange={(e) => setInput(e.target.value)}
                      onKeyPress={handleKeyPress}
                      placeholder="Speak to your AI co-pilot... or use /command for direct execution"
                      className="w-full px-4 py-3 bg-slate-800/50 border border-cyan-500/30 rounded-lg text-gray-100 placeholder-gray-500 focus:outline-none focus:border-cyan-400/50 focus:ring-2 focus:ring-cyan-500/20 resize-none transition-all"
                      rows={2}
                    />
                    {input.startsWith('/') && (
                      <div className="absolute top-0 left-4 -translate-y-6 text-xs text-cyan-400 font-mono">
                        Command Mode
                      </div>
                    )}
                  </div>
                  <button
                    onClick={handleSend}
                    disabled={isProcessing}
                    className="px-6 py-3 bg-gradient-to-r from-cyan-600 to-cyan-700 hover:from-cyan-500 hover:to-cyan-600 disabled:from-slate-700 disabled:to-slate-700 text-white rounded-lg transition-all flex items-center gap-2 font-medium shadow-lg shadow-cyan-500/20"
                  >
                    <Send size={18} />
                    Send
                  </button>
                </div>
                <div className="mt-2 text-xs text-gray-500">
                  <span className="text-cyan-400">Tip:</span> Press Enter to send, Shift+Enter for new line, start with / for commands
                </div>
              </div>
            </div>

            <div className="w-80 border-l border-slate-700/50 bg-slate-900/50 backdrop-blur-sm flex flex-col">
              
              <div className="p-4 border-b border-slate-700/50">
                <div className="flex items-center gap-2 mb-3">
                  <MessageSquare size={16} className="text-blue-400" />
                  <h3 className="font-semibold text-sm text-gray-300">Communications</h3>
                </div>
                <div className="space-y-2 text-sm">
                  <div className="p-2 bg-slate-800/50 rounded flex items-center gap-3">
                    <div className="w-2 h-2 bg-blue-400 rounded-full"></div>
                    <div className="flex-1">
                      <div className="text-gray-300">Team Sync</div>
                      <div className="text-xs text-gray-500">3 new messages</div>
                    </div>
                  </div>
                  <div className="p-2 bg-slate-800/30 rounded flex items-center gap-3">
                    <div className="flex-1">
                      <div className="text-gray-300">Project Updates</div>
                      <div className="text-xs text-gray-500">No new activity</div>
                    </div>
                  </div>
                </div>
              </div>

              <div className="p-4 flex-1 overflow-y-auto">
                <div className="flex items-center gap-2 mb-3">
                  <Bell size={16} className="text-yellow-400" />
                  <h3 className="font-semibold text-sm text-gray-300">Notifications</h3>
                </div>
                <div className="space-y-2 text-sm">
                  <div className="p-2 bg-slate-800/50 rounded border-l-2 border-yellow-400">
                    <div className="text-gray-300 mb-1">System Update Available</div>
                    <div className="text-xs text-gray-500">OES AIOS v4.1 ready to install</div>
                  </div>
                  <div className="p-2 bg-slate-800/30 rounded">
                    <div className="text-gray-300 mb-1">Backup Complete</div>
                    <div className="text-xs text-gray-500">All data synchronized</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div className="border-t border-slate-700/50 bg-slate-900/80 backdrop-blur-sm px-6 py-2 flex items-center justify-between text-xs">
            <div className="flex items-center gap-6">
              <div className="flex items-center gap-2">
                <div className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                <span className="text-gray-400">System: Optimal</span>
              </div>
              <div className="text-gray-400">
                RAM: <span className="text-cyan-400">{systemStats.ram}%</span>
              </div>
              <div className="text-gray-400">
                Storage: <span className="text-cyan-400">{systemStats.storage}%</span>
              </div>
              <div className="text-gray-400">
                Processes: <span className="text-cyan-400">{systemStats.processes}</span>
              </div>
            </div>
            <div className="text-gray-500">
              OES AIOS v4.0 • Bridge Status: <span className="text-cyan-400">ETERNAL</span>
            </div>
          </div>
        </div>
      );
    };

    ReactDOM.render(<EvolvTerminal />, document.getElementById('root'));
  </script>
</body>
</html>